[gd_scene load_steps=9 format=3 uid="uid://clrcv081gblwd"]

[ext_resource type="Script" path="res://scripts/GameManager.gd" id="1"]
[ext_resource type="Script" path="res://scripts/Player.gd" id="2"]
[ext_resource type="Script" path="res://scripts/CameraController.gd" id="3"]
[ext_resource type="Script" path="res://scripts/TowerManager.gd" id="4"]
[ext_resource type="Script" path="res://scripts/ui/HUD.gd" id="5"]
[ext_resource type="Script" path="res://scripts/ui/TaskMenu.gd" id="6"]
[ext_resource type="Script" path="res://scripts/ui/RadioPanel.gd" id="7"]
[ext_resource type="Script" path="res://scripts/ui/CraftingPanel.gd" id="8"]
[ext_resource type="Script" path="res://scripts/ui/InventoryPanel.gd" id="9"]
[ext_resource type="Script" path="res://scripts/ui/ForgingResultsPanel.gd" id="10"]

[sub_resource type="RectangleShape2D" id="1"]
size = Vector2(32, 32)

[node name="Main" type="Node2D"]

[node name="Camera2D" type="Camera2D" parent="."]
script = ExtResource("3")

[node name="GameManager" type="Node" parent="."]
script = ExtResource("1")

[node name="TowerManager" type="Node2D" parent="."]
script = ExtResource("4")

[node name="Player" type="CharacterBody2D" parent="."]
position = Vector2(640, 360)
script = ExtResource("2")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player"]
shape = SubResource("1")

[node name="ColorRect" type="ColorRect" parent="Player"]
offset_left = -16.0
offset_top = -16.0
offset_right = 16.0
offset_bottom = 16.0
color = Color(0, 0, 1, 1)

[node name="UI" type="CanvasLayer" parent="."]

[node name="HUD" type="Control" parent="UI"]
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource("5")

[node name="DayTimeHeader" type="VBoxContainer" parent="UI/HUD"]
anchor_left = 0.5
anchor_right = 0.5
offset_left = -96.0
offset_top = 24.0
offset_right = 96.0
offset_bottom = 88.0
theme_override_constants/separation = 4

[node name="DayLabel" type="Label" parent="UI/HUD/DayTimeHeader"]
text = "Day 1"
horizontal_alignment = 1

[node name="ClockLabel" type="Label" parent="UI/HUD/DayTimeHeader"]
text = "6:00 AM"
horizontal_alignment = 1

[node name="WeatherLabel" type="Label" parent="UI/HUD/DayTimeHeader"]
text = "Clear Skies (x1.00)"
horizontal_alignment = 1

[node name="StatsBar" type="MarginContainer" parent="UI/HUD"]
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 0.0
offset_left = -352.0
offset_top = 32.0
offset_right = -32.0
offset_bottom = 116.0
custom_constants/margin_left = 24
custom_constants/margin_top = 16
custom_constants/margin_right = 24
custom_constants/margin_bottom = 24

[node name="TopRightStats" type="VBoxContainer" parent="UI/HUD"]
anchor_left = 1.0
anchor_top = 0.0
anchor_right = 1.0
anchor_bottom = 0.0
offset_left = -260.0
offset_top = 16.0
offset_right = -32.0
offset_bottom = 148.0
theme_override_constants/separation = 6

[node name="WeightHeader" type="Label" parent="UI/HUD/TopRightStats"]
horizontal_alignment = 2
vertical_alignment = 1
text = "175.0 LBS [Healthy]"

[node name="ResourceList" type="VBoxContainer" parent="UI/HUD/TopRightStats"]
size_flags_horizontal = 3
theme_override_constants/separation = 4

[node name="FoodCounter" type="Label" parent="UI/HUD/TopRightStats/ResourceList"]
horizontal_alignment = 2
vertical_alignment = 1
text = "Food: 5.0"

[node name="WoodCounter" type="Label" parent="UI/HUD/TopRightStats/ResourceList"]
horizontal_alignment = 2
vertical_alignment = 1
text = "Wood: 0"

[node name="ZombieCounter" type="Label" parent="UI/HUD/TopRightStats/ResourceList"]
horizontal_alignment = 2
vertical_alignment = 1
text = "Zombies: 0"

[node name="TowerHealthLabel" type="Label" parent="UI/HUD/TopRightStats/ResourceList"]
horizontal_alignment = 2
vertical_alignment = 1
text = "Tower: 100/100"

[node name="Metrics" type="HBoxContainer" parent="UI/HUD/StatsBar"]
anchor_right = 1.0
anchor_bottom = 1.0
size_flags_horizontal = 3
size_flags_vertical = 1
alignment = 2
theme_override_constants/separation = 24

[node name="TiredStat" type="VBoxContainer" parent="UI/HUD/StatsBar/Metrics"]
custom_minimum_size = Vector2(160, 0)
size_flags_horizontal = 3
size_flags_vertical = 1

[node name="TiredLabel" type="Label" parent="UI/HUD/StatsBar/Metrics/TiredStat"]
text = "Tired"

[node name="TiredMeter" type="HBoxContainer" parent="UI/HUD/StatsBar/Metrics/TiredStat"]
size_flags_horizontal = 3
size_flags_vertical = 1
alignment = 0

[node name="TiredBar" type="ProgressBar" parent="UI/HUD/StatsBar/Metrics/TiredStat/TiredMeter"]
min_value = 0.0
max_value = 100.0
value = 75.0
size_flags_horizontal = 3
size_flags_vertical = 1
show_percentage = false

[node name="TiredValue" type="Label" parent="UI/HUD/StatsBar/Metrics/TiredStat/TiredMeter"]
size_flags_horizontal = 1
size_flags_vertical = 1
horizontal_alignment = 2
text = "75%"

[node name="DailyCalStat" type="VBoxContainer" parent="UI/HUD/StatsBar/Metrics"]
custom_minimum_size = Vector2(160, 0)
size_flags_horizontal = 3
size_flags_vertical = 1

[node name="DailyCalLabel" type="Label" parent="UI/HUD/StatsBar/Metrics/DailyCalStat"]
text = "Daily Cal Used"

[node name="DailyCalValue" type="Label" parent="UI/HUD/StatsBar/Metrics/DailyCalStat"]
text = "0"
horizontal_alignment = 2
vertical_alignment = 1

[node name="WeightStat" type="VBoxContainer" parent="UI/HUD/StatsBar/Metrics"]
custom_minimum_size = Vector2(160, 0)
size_flags_horizontal = 3
size_flags_vertical = 1

[node name="WeightLabel" type="Label" parent="UI/HUD/StatsBar/Metrics/WeightStat"]
text = "Weight"

[node name="WeightRow" type="HBoxContainer" parent="UI/HUD/StatsBar/Metrics/WeightStat"]
size_flags_horizontal = 3
alignment = 2
custom_constants/separation = 8

[node name="WeightValue" type="Label" parent="UI/HUD/StatsBar/Metrics/WeightStat/WeightRow"]
custom_minimum_size = Vector2(72, 0)
horizontal_alignment = 2
text = "175.0"

[node name="WeightUnitButton" type="Button" parent="UI/HUD/StatsBar/Metrics/WeightStat/WeightRow"]
custom_minimum_size = Vector2(56, 0)
text = "LBS"

[node name="WeightStatus" type="Label" parent="UI/HUD/StatsBar/Metrics/WeightStat"]
horizontal_alignment = 2
text = "Average (x1.0)"

[node name="TaskMenu" type="Control" parent="UI"]
forging_results_panel_path = NodePath("../ForgingResultsPanel")
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
visible = false
offset_left = -230.0
offset_top = -150.0
offset_right = 230.0
offset_bottom = 150.0
script = ExtResource("6")

[node name="Layout" type="VBoxContainer" parent="UI/TaskMenu"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_constants/separation = 12

[node name="InfoPanel" type="Panel" parent="UI/TaskMenu/Layout"]
size_flags_horizontal = 3

[node name="InfoMargin" type="MarginContainer" parent="UI/TaskMenu/Layout/InfoPanel"]
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/margin_left = 16
theme_override_constants/margin_top = 16
theme_override_constants/margin_right = 16
theme_override_constants/margin_bottom = 16

[node name="InfoList" type="VBoxContainer" parent="UI/TaskMenu/Layout/InfoPanel/InfoMargin"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_constants/separation = 6

[node name="DescriptionTitle" type="Label" parent="UI/TaskMenu/Layout/InfoPanel/InfoMargin/InfoList"]
text = "Task Details"
horizontal_alignment = 1

[node name="SummaryLabel" type="Label" parent="UI/TaskMenu/Layout/InfoPanel/InfoMargin/InfoList"]
size_flags_horizontal = 3
size_flags_vertical = 3
autowrap_mode = 2
text = "Each hour: +10% rest / -100 cal"

[node name="InfoStatus" type="Label" parent="UI/TaskMenu/Layout/InfoPanel/InfoMargin/InfoList"]
size_flags_horizontal = 3
autowrap_mode = 2
text = ""

[node name="DescriptionHint" type="Label" parent="UI/TaskMenu/Layout/InfoPanel/InfoMargin/InfoList"]
autowrap_mode = 2
text = "Hover or focus an action to see its requirements."

[node name="GoRow" type="HBoxContainer" parent="UI/TaskMenu/Layout/InfoPanel/InfoMargin/InfoList"]
alignment = 2

[node name="GoButton" type="Button" parent="UI/TaskMenu/Layout/InfoPanel/InfoMargin/InfoList/GoRow"]
custom_minimum_size = Vector2(80, 0)
text = "Go"

[node name="ActionsPanel" type="Panel" parent="UI/TaskMenu/Layout"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Margin" type="MarginContainer" parent="UI/TaskMenu/Layout/ActionsPanel"]
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/margin_left = 16
theme_override_constants/margin_top = 16
theme_override_constants/margin_right = 16
theme_override_constants/margin_bottom = 16

[node name="ActionList" type="VBoxContainer" parent="UI/TaskMenu/Layout/ActionsPanel/Margin"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_constants/separation = 12

[node name="TitleLabel" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList"]
text = "Tower Tasks"
horizontal_alignment = 1

[node name="SleepRow" type="HBoxContainer" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList"]
custom_constants/separation = 12
size_flags_horizontal = 3

[node name="SleepLabel" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/SleepRow"]
custom_minimum_size = Vector2(72, 0)
text = "Rest"
vertical_alignment = 1

[node name="HourSelector" type="HBoxContainer" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/SleepRow"]
size_flags_horizontal = 3
custom_constants/separation = 8

[node name="DecreaseButton" type="Button" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/SleepRow/HourSelector"]
text = "<"

[node name="HoursValue" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/SleepRow/HourSelector"]
custom_minimum_size = Vector2(48, 0)
horizontal_alignment = 1
vertical_alignment = 1
text = "0"

[node name="IncreaseButton" type="Button" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/SleepRow/HourSelector"]
text = ">"

[node name="SleepSelectButton" type="Button" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/SleepRow"]
size_flags_horizontal = 1
text = "Select"

[node name="ForgingRow" type="HBoxContainer" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList"]
custom_constants/separation = 12
size_flags_horizontal = 3

[node name="ForgingLabel" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/ForgingRow"]
custom_minimum_size = Vector2(72, 0)
text = "Forge"
vertical_alignment = 1

[node name="ForgingStatus" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/ForgingRow"]
size_flags_horizontal = 3
autowrap_mode = 1
text = "Forging ready"

[node name="ForgingSelectButton" type="Button" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/ForgingRow"]
text = "Select"

[node name="LeadRow" type="HBoxContainer" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList"]
custom_constants/separation = 12
size_flags_horizontal = 3

[node name="LeadLabel" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/LeadRow"]
custom_minimum_size = Vector2(72, 0)
text = "Lead"
vertical_alignment = 1

[node name="LeadStatus" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/LeadRow"]
size_flags_horizontal = 3
autowrap_mode = 1
text = "Lead Away ->"

[node name="LeadSelectButton" type="Button" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/LeadRow"]
text = "Select"

[node name="MealRow" type="HBoxContainer" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList"]
custom_constants/separation = 8
size_flags_horizontal = 3

[node name="MealLabel" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/MealRow"]
custom_minimum_size = Vector2(72, 0)
text = "Eat"
vertical_alignment = 1

[node name="MealSizeOption" type="OptionButton" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/MealRow"]
size_flags_horizontal = 3

[node name="MealSummary" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/MealRow"]
size_flags_horizontal = 3
autowrap_mode = 1
text = "Meal ->"

[node name="MealSelectButton" type="Button" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/MealRow"]
text = "Select"

[node name="RepairRow" type="HBoxContainer" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList"]
custom_constants/separation = 12
size_flags_horizontal = 3

[node name="RepairLabel" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/RepairRow"]
custom_minimum_size = Vector2(72, 0)
text = "Repair"
vertical_alignment = 1

[node name="RepairSummary" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/RepairRow"]
size_flags_horizontal = 3
autowrap_mode = 1
text = "Repair ->"

[node name="RepairSelectButton" type="Button" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/RepairRow"]
text = "Select"

[node name="ReinforceRow" type="HBoxContainer" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList"]
custom_constants/separation = 12
size_flags_horizontal = 3

[node name="ReinforceLabel" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/ReinforceRow"]
custom_minimum_size = Vector2(72, 0)
text = "Reinforce"
vertical_alignment = 1

[node name="ReinforceSummary" type="Label" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/ReinforceRow"]
size_flags_horizontal = 3
autowrap_mode = 1
text = "Reinforce ->"

[node name="ReinforceSelectButton" type="Button" parent="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/ReinforceRow"]
text = "Select"

[node name="RadioPanel" type="Control" parent="UI"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -260.0
offset_top = -140.0
offset_right = 260.0
offset_bottom = 140.0
visible = false
script = ExtResource("7")

[node name="Panel" type="Panel" parent="UI/RadioPanel"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="VBox" type="VBoxContainer" parent="UI/RadioPanel/Panel"]
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 16.0
offset_top = 16.0
offset_right = -16.0
offset_bottom = -16.0
theme_override_constants/separation = 12

[node name="Title" type="Label" parent="UI/RadioPanel/Panel/VBox"]
text = "Radio Update"
horizontal_alignment = 1

[node name="Body" type="Label" parent="UI/RadioPanel/Panel/VBox"]
text = "Static hums in the speaker."
autowrap_mode = 3

[node name="CraftingPanel" type="Control" parent="UI"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -240.0
offset_top = -160.0
offset_right = 240.0
offset_bottom = 160.0
visible = false
script = ExtResource("8")

[node name="Panel" type="Panel" parent="UI/CraftingPanel"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Margin" type="MarginContainer" parent="UI/CraftingPanel/Panel"]
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/margin_left = 16
theme_override_constants/margin_top = 16
theme_override_constants/margin_right = 16
theme_override_constants/margin_bottom = 16

[node name="VBox" type="VBoxContainer" parent="UI/CraftingPanel/Panel/Margin"]
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/separation = 12

[node name="TitleLabel" type="Label" parent="UI/CraftingPanel/Panel/Margin/VBox"]
text = "Crafting"
horizontal_alignment = 1

[node name="RecipeList" type="VBoxContainer" parent="UI/CraftingPanel/Panel/Margin/VBox"]
custom_constants/separation = 8

[node name="DetailLabel" type="Label" parent="UI/CraftingPanel/Panel/Margin/VBox"]
size_flags_vertical = 3
autowrap_mode = 2

[node name="StatusLabel" type="Label" parent="UI/CraftingPanel/Panel/Margin/VBox"]
autowrap_mode = 2

[node name="ButtonRow" type="HBoxContainer" parent="UI/CraftingPanel/Panel/Margin/VBox"]
alignment = 2

[node name="CloseButton" type="Button" parent="UI/CraftingPanel/Panel/Margin/VBox/ButtonRow"]
text = "Close"

[node name="InventoryPanel" type="Control" parent="UI"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -220.0
offset_top = -160.0
offset_right = 220.0
offset_bottom = 160.0
visible = false
script = ExtResource("9")

[node name="Panel" type="Panel" parent="UI/InventoryPanel"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Margin" type="MarginContainer" parent="UI/InventoryPanel/Panel"]
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/margin_left = 16
theme_override_constants/margin_top = 16
theme_override_constants/margin_right = 16
theme_override_constants/margin_bottom = 16

[node name="VBox" type="VBoxContainer" parent="UI/InventoryPanel/Panel/Margin"]
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/separation = 12

[node name="TitleLabel" type="Label" parent="UI/InventoryPanel/Panel/Margin/VBox"]
text = "Inventory"
horizontal_alignment = 1

[node name="ItemScroll" type="ScrollContainer" parent="UI/InventoryPanel/Panel/Margin/VBox"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Items" type="VBoxContainer" parent="UI/InventoryPanel/Panel/Margin/VBox/ItemScroll"]
size_flags_horizontal = 3
custom_constants/separation = 6

[node name="Placeholder" type="Label" parent="UI/InventoryPanel/Panel/Margin/VBox/ItemScroll/Items"]
text = "Inventory offline"
autowrap_mode = 2

[node name="ButtonRow" type="HBoxContainer" parent="UI/InventoryPanel/Panel/Margin/VBox"]
alignment = 2

[node name="CloseButton" type="Button" parent="UI/InventoryPanel/Panel/Margin/VBox/ButtonRow"]
text = "Close"

[node name="ForgingResultsPanel" type="Control" parent="UI"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -240.0
offset_top = -170.0
offset_right = 240.0
offset_bottom = 170.0
visible = false
script = ExtResource("10")

[node name="Panel" type="Panel" parent="UI/ForgingResultsPanel"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="Margin" type="MarginContainer" parent="UI/ForgingResultsPanel/Panel"]
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/margin_left = 16
theme_override_constants/margin_top = 16
theme_override_constants/margin_right = 16
theme_override_constants/margin_bottom = 16

[node name="VBox" type="VBoxContainer" parent="UI/ForgingResultsPanel/Panel/Margin"]
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_constants/separation = 12

[node name="TitleLabel" type="Label" parent="UI/ForgingResultsPanel/Panel/Margin/VBox"]
text = "Forge Finds"
horizontal_alignment = 1

[node name="MessageLabel" type="Label" parent="UI/ForgingResultsPanel/Panel/Margin/VBox"]
autowrap_mode = 2

[node name="ItemScroll" type="ScrollContainer" parent="UI/ForgingResultsPanel/Panel/Margin/VBox"]
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Items" type="VBoxContainer" parent="UI/ForgingResultsPanel/Panel/Margin/VBox/ItemScroll"]
size_flags_horizontal = 3
custom_constants/separation = 8

[node name="Placeholder" type="Label" parent="UI/ForgingResultsPanel/Panel/Margin/VBox/ItemScroll/Items"]
text = "No items collected."
autowrap_mode = 2

[node name="ButtonRow" type="HBoxContainer" parent="UI/ForgingResultsPanel/Panel/Margin/VBox"]
alignment = 2

[node name="CloseButton" type="Button" parent="UI/ForgingResultsPanel/Panel/Margin/VBox/ButtonRow"]
text = "Close"

[node name="CloseButton" type="Button" parent="UI/RadioPanel/Panel/VBox"]
text = "Close"

[connection signal="pressed" from="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/SleepRow/HourSelector/DecreaseButton" to="UI/TaskMenu" method="_on_decrease_button_pressed"]
[connection signal="pressed" from="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/SleepRow/HourSelector/IncreaseButton" to="UI/TaskMenu" method="_on_increase_button_pressed"]
[connection signal="item_selected" from="UI/TaskMenu/Layout/ActionsPanel/Margin/ActionList/MealRow/MealSizeOption" to="UI/TaskMenu" method="_on_meal_size_option_item_selected"]
[connection signal="pressed" from="UI/HUD/StatsBar/Metrics/WeightStat/WeightRow/WeightUnitButton" to="UI/HUD" method="_on_weight_unit_button_pressed"]
