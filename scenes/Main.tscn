[gd_scene load_steps=6 format=3 uid="uid://clrcv081gblwd"]

[ext_resource type="Script" path="res://scripts/GameManager.gd" id="1"]
[ext_resource type="Script" path="res://scripts/Player.gd" id="2"]
[ext_resource type="Script" path="res://scripts/CameraController.gd" id="3"]
[ext_resource type="Script" path="res://scripts/TowerManager.gd" id="4"]
[ext_resource type="Script" path="res://scripts/ui/HUD.gd" id="5"]
[ext_resource type="Script" path="res://scripts/ui/TaskMenu.gd" id="6"]

[sub_resource type="RectangleShape2D" id="1"]
size = Vector2(32, 32)

[node name="Main" type="Node2D"]

[node name="Camera2D" type="Camera2D" parent="."]
script = ExtResource("3")

[node name="GameManager" type="Node" parent="."]
script = ExtResource("1")

[node name="TowerManager" type="Node2D" parent="."]
script = ExtResource("4")

[node name="Player" type="CharacterBody2D" parent="."]
position = Vector2(640, 360)
script = ExtResource("2")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player"]
shape = SubResource("1")

[node name="ColorRect" type="ColorRect" parent="Player"]
offset_left = -16.0
offset_top = -16.0
offset_right = 16.0
offset_bottom = 16.0
color = Color(0, 0, 1, 1)

[node name="UI" type="CanvasLayer" parent="."]

[node name="HUD" type="Control" parent="UI"]
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource("5")

[node name="DayTimeHeader" type="VBoxContainer" parent="UI/HUD"]
anchor_left = 0.5
anchor_right = 0.5
offset_left = -96.0
offset_top = 24.0
offset_right = 96.0
offset_bottom = 88.0
theme_override_constants/separation = 4

[node name="DayLabel" type="Label" parent="UI/HUD/DayTimeHeader"]
text = "Day 1"
horizontal_alignment = 1

[node name="ClockLabel" type="Label" parent="UI/HUD/DayTimeHeader"]
text = "6:00 AM"
horizontal_alignment = 1

[node name="StatsBar" type="MarginContainer" parent="UI/HUD"]
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 0.0
offset_left = -352.0
offset_top = 32.0
offset_right = -32.0
offset_bottom = 116.0
custom_constants/margin_left = 24
custom_constants/margin_top = 16
custom_constants/margin_right = 24
custom_constants/margin_bottom = 24

[node name="Metrics" type="HBoxContainer" parent="UI/HUD/StatsBar"]
anchor_right = 1.0
anchor_bottom = 1.0
size_flags_horizontal = 3
size_flags_vertical = 1
alignment = 2
theme_override_constants/separation = 24

[node name="TiredStat" type="VBoxContainer" parent="UI/HUD/StatsBar/Metrics"]
custom_minimum_size = Vector2(160, 0)
size_flags_horizontal = 3
size_flags_vertical = 1

[node name="TiredLabel" type="Label" parent="UI/HUD/StatsBar/Metrics/TiredStat"]
text = "Tired"

[node name="TiredMeter" type="HBoxContainer" parent="UI/HUD/StatsBar/Metrics/TiredStat"]
size_flags_horizontal = 3
size_flags_vertical = 1
alignment = 0

[node name="TiredBar" type="ProgressBar" parent="UI/HUD/StatsBar/Metrics/TiredStat/TiredMeter"]
min_value = 0.0
max_value = 100.0
value = 75.0
size_flags_horizontal = 3
size_flags_vertical = 1
show_percentage = false

[node name="TiredValue" type="Label" parent="UI/HUD/StatsBar/Metrics/TiredStat/TiredMeter"]
size_flags_horizontal = 1
size_flags_vertical = 1
horizontal_alignment = 2
text = "75%"

[node name="DailyCalStat" type="VBoxContainer" parent="UI/HUD/StatsBar/Metrics"]
custom_minimum_size = Vector2(160, 0)
size_flags_horizontal = 3
size_flags_vertical = 1

[node name="DailyCalLabel" type="Label" parent="UI/HUD/StatsBar/Metrics/DailyCalStat"]
text = "Daily Cal Used"

[node name="DailyCalValue" type="Label" parent="UI/HUD/StatsBar/Metrics/DailyCalStat"]
text = "0"
horizontal_alignment = 2
vertical_alignment = 1

[node name="WeightStat" type="VBoxContainer" parent="UI/HUD/StatsBar/Metrics"]
custom_minimum_size = Vector2(160, 0)
size_flags_horizontal = 3
size_flags_vertical = 1

[node name="WeightLabel" type="Label" parent="UI/HUD/StatsBar/Metrics/WeightStat"]
text = "Weight"

[node name="WeightRow" type="HBoxContainer" parent="UI/HUD/StatsBar/Metrics/WeightStat"]
size_flags_horizontal = 3
alignment = 2
custom_constants/separation = 8

[node name="WeightValue" type="Label" parent="UI/HUD/StatsBar/Metrics/WeightStat/WeightRow"]
custom_minimum_size = Vector2(72, 0)
horizontal_alignment = 2
text = "175.0"

[node name="WeightUnitButton" type="Button" parent="UI/HUD/StatsBar/Metrics/WeightStat/WeightRow"]
custom_minimum_size = Vector2(56, 0)
text = "LBS"

[node name="WeightStatus" type="Label" parent="UI/HUD/StatsBar/Metrics/WeightStat"]
horizontal_alignment = 2
text = "Average (x1.0)"

[node name="TaskMenu" type="Control" parent="UI"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
visible = false
offset_left = -160.0
offset_top = -120.0
offset_right = 160.0
offset_bottom = 120.0
script = ExtResource("6")

[node name="Panel" type="Panel" parent="UI/TaskMenu"]
anchor_right = 1.0
anchor_bottom = 1.0

[node name="VBox" type="VBoxContainer" parent="UI/TaskMenu/Panel"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_constants/separation = 12
offset_left = 16.0
offset_top = 16.0
offset_right = -16.0
offset_bottom = -16.0

[node name="TitleLabel" type="Label" parent="UI/TaskMenu/Panel/VBox"]
text = "Sleep Task"
horizontal_alignment = 1

[node name="HourSelector" type="HBoxContainer" parent="UI/TaskMenu/Panel/VBox"]
size_flags_horizontal = 3
alignment = 1
custom_constants/separation = 12

[node name="DecreaseButton" type="Button" parent="UI/TaskMenu/Panel/VBox/HourSelector"]
text = "<"

[node name="HoursValue" type="Label" parent="UI/TaskMenu/Panel/VBox/HourSelector"]
custom_minimum_size = Vector2(48, 0)
horizontal_alignment = 1
vertical_alignment = 1
text = "0"

[node name="IncreaseButton" type="Button" parent="UI/TaskMenu/Panel/VBox/HourSelector"]
text = ">"

[node name="SummaryLabel" type="Label" parent="UI/TaskMenu/Panel/VBox"]
text = "Each hour: +10% rest / -100 cal"
horizontal_alignment = 1

[node name="SleepButton" type="Button" parent="UI/TaskMenu/Panel/VBox"]
text = "Rest"

[connection signal="pressed" from="UI/TaskMenu/Panel/VBox/HourSelector/DecreaseButton" to="UI/TaskMenu" method="_on_decrease_button_pressed"]
[connection signal="pressed" from="UI/TaskMenu/Panel/VBox/HourSelector/IncreaseButton" to="UI/TaskMenu" method="_on_increase_button_pressed"]
[connection signal="pressed" from="UI/TaskMenu/Panel/VBox/SleepButton" to="UI/TaskMenu" method="_on_sleep_button_pressed"]
[connection signal="pressed" from="UI/HUD/StatsBar/Metrics/WeightStat/WeightRow/WeightUnitButton" to="UI/HUD" method="_on_weight_unit_button_pressed"]
